@model ProyectoNominaINTBII.Models.UserModel

<h2>Agregar Usuario</h2>
<form asp-action="CreateUser" asp-controller="Admin" method="post" class="create-user-form">
    <div class="row">
        <!-- Columna izquierda -->
        <div class="col-md-6">
            <div class="form-group">
                <label for="Nombre">Nombre Completo</label>
                <input type="text" class="form-control" id="Nombre" name="Nombre" placeholder="Ingrese el nombre completo" required />
            </div>
            <div class="form-group">
                <label for="NumeroEmpleado">Número de Empleado</label>
                <input type="text" class="form-control" id="NumeroEmpleado" name="NumeroEmpleado" placeholder="Ingrese un valor numérico" required />
            </div>
            <div class="form-group">
                <label for="RFC">RFC</label>
                <input type="text" class="form-control" id="RFC" name="RFC" placeholder="Ejemplo: ABCD123456789" required />
            </div>
            <div class="form-group">
                <label for="CURP">CURP</label>
                <input type="text" class="form-control" id="CURP" name="CURP" placeholder="Ejemplo: ABCD123456HDFR01" required />
            </div>
            <div class="form-group">
                <label for="RegimenFiscal">Régimen Fiscal</label>
                <input type="text" class="form-control" id="RegimenFiscal" name="RegimenFiscal" placeholder="Ingrese el régimen fiscal" required />
            </div>
            <div class="form-group">
                <label for="NoIMSS">Número IMSS</label>
                <input type="text" class="form-control" id="NoIMSS" name="NoIMSS" placeholder="Ejemplo: 12345678901" required />
            </div>
            <div class="form-group">
                <label for="FechaInicio">Fecha de Inicio</label>
                <input type="date" class="form-control" id="FechaInicio" name="FechaInicio" required />
            </div>
            <div class="form-group">
                <label for="Regimen">Régimen</label>
                <input type="text" class="form-control" id="Regimen" name="Regimen" placeholder="Ingrese el régimen" required />
            </div>
            <div class="form-group">
                <label for="TipoJornada">Tipo de Jornada</label>
                <input type="text" class="form-control" id="TipoJornada" name="TipoJornada" placeholder="Ejemplo: Diurna" required />
            </div>
            <div class="form-group">
                <label for="Telefono">Teléfono</label>
                <input type="text" class="form-control" id="Telefono" name="Telefono" placeholder="Ejemplo: 123-456-7890" required />
            </div>
            <div class="form-group">
                <label for="Email">Correo Electrónico</label>
                <input type="email" class="form-control" id="Email" name="Email" placeholder="Ejemplo: correo@ejemplo.com" required />
            </div>
        </div>

        <!-- Columna derecha -->
        <div class="col-md-6">
            <div class="form-group">
                <label for="SBC">SBC</label>
                <input type="number" step="0.01" class="form-control" id="SBC" name="SBC" placeholder="Ingrese un valor numérico" required />
            </div>
            <div class="form-group">
                <label for="SDI">SDI</label>
                <input type="number" step="0.01" class="form-control" id="SDI" name="SDI" placeholder="Ingrese un valor numérico" required />
            </div>
            <div class="form-group">
                <label for="Ejercicio">Ejercicio</label>
                <input type="text" class="form-control" id="Ejercicio" name="Ejercicio" placeholder="Ingrese el ejercicio" required />
            </div>
            <div class="form-group">
                <label for="Folio">Folio</label>
                <input type="text" class="form-control" id="Folio" name="Folio" placeholder="Ingrese el folio" required />
            </div>
            <div class="form-group">
                <label for="PeriodoPago">Periodo de Pago</label>
                <input type="text" class="form-control" id="PeriodoPago" name="PeriodoPago" placeholder="Ejemplo: Mensual" required />
            </div>
            <div class="form-group">
                <label for="FechaPago">Fecha de Pago</label>
                <input type="date" class="form-control" id="FechaPago" name="FechaPago" required />
            </div>
            <div class="form-group">
                <label for="Periodicidad">Periodicidad</label>
                <input type="text" class="form-control" id="Periodicidad" name="Periodicidad" placeholder="Ejemplo: Mensual" required />
            </div>
            <div class="form-group">
                <label for="DiasPagados">Días Pagados</label>
                <input type="number" class="form-control" id="DiasPagados" name="DiasPagados" placeholder="Ingrese un valor numérico" required />
            </div>
            <div class="form-group">
                <label for="Faltas">Faltas</label>
                <input type="number" class="form-control" id="Faltas" name="Faltas" placeholder="Ingrese un valor numérico" required />
            </div>
            <div class="form-group">
                <label for="Departamento">Departamento</label>
                <input type="text" class="form-control" id="Departamento" name="Departamento" placeholder="Ingrese el departamento" required />
            </div>
            <div class="form-group">
                <label for="Puesto">Puesto</label>
                <input type="text" class="form-control" id="Puesto" name="Puesto" placeholder="Ingrese el puesto" required />
            </div>
        </div>
    </div>

    <!-- Columna completa para los campos restantes -->
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="SalarioDiario">Salario Diario</label>
                <input type="number" step="0.01" class="form-control" id="SalarioDiario" name="SalarioDiario" placeholder="Ingrese un valor numérico" required />
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="Username">Username</label>
                <input type="text" class="form-control" id="Username" name="Username" placeholder="Ingrese el username" required />
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="Password">Password</label>
                <input type="password" class="form-control" id="Password" name="Password" placeholder="Ingrese el password" required />
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="Role">Role</label>
                <input type="text" class="form-control" id="Role" name="Role" placeholder="Ejemplo: Admin o Empleado" required />
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="Estado">Estado</label>
                <select id="Estado" name="IsActive" class="form-control custom-select" required>
                    <option value="true" selected="@Model.IsActive">Activo</option>
                    <option value="false" selected="@(Model.IsActive == false)">Inactivo</option>
                </select>

            </div>
        </div>
    </div>

    <!-- Botón centrado -->
    <div class="button-container">
        <button type="submit" class="btn-create-user">
            <i class="fas fa-user-plus icon-spacing"></i> Agregar Usuario
        </button>
    </div>
</form>

<script>
    function createUser() {
        // Evitar el envío de formulario tradicional
        event.preventDefault();

        // Recopila los datos del formulario
        const formData = new FormData(document.getElementById("createUserForm"));

        fetch('/Admin/CreateUser', {
            method: 'POST',
            body: formData
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("Usuario creado con éxito.");

                    // Llama a la función para actualizar la lista en ListUsers
                    addUserToListUsers(data.user);

                    // Limpia el formulario después de crear el usuario
                    document.getElementById("createUserForm").reset();
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error("Error:", error));
    }
</script>

<style>
    /* Centrado de la forma completa */
    .create-user-form {
        max-width: 900px;
        margin: 0 auto;
    }

    /* Estilo exclusivo para el botón en CreateUser */
    .button-container {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        margin-bottom: 60px; /* Espacio entre el botón y el footer */
    }

    .btn-create-user {
        background-color: #007bff;
        color: white;
        padding: 10px 20px;
        font-size: 1em;
        font-weight: bold;
        border: none;
        border-radius: 5px;
        display: inline-flex;
        align-items: center;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

        .btn-create-user:hover {
            background-color: #0056b3;
        }

    /* Espaciado para el ícono en el botón */
    .icon-spacing {
        margin-right: 8px;
    }

    /* Estilos adicionales para campos y formulario */
    .form-group {
        margin-bottom: 15px;
    }

    h2 {
        text-align: center;
        margin-bottom: 20px;
        color: #333;
    }

    /* Estilos específicos para el campo select en la vista CreateUser */
    .custom-select {
        padding: 8px 12px;
        font-size: 1em; /* Ajusta el tamaño de fuente si es necesario */
        line-height: normal; /* Asegura que la altura de línea no corte el texto */
        width: 100%; /* Asegura que ocupe todo el ancho de su contenedor */
        border: 1px solid #007bff;
        border-radius: 5px;
        appearance: none; /* Oculta el ícono de dropdown predeterminado */
    }

        /* Opcional: Añade estilos para el ícono dropdown en algunos navegadores */
        .custom-select::after {
            content: '▼';
            font-size: 0.75em;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }
</style>
